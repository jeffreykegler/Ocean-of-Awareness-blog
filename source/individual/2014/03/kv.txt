Your new language: extending the syntax
<html>
  <head>
  </head>
  <body><p>
      <!--
      marpa_r2_html_fmt --no-added-tag-comment --no-ws-ok-after-start-tag
      -->
      Ideally, if a syntax is useful and clear,
      and a programmer can easily parse it at a glance,
      a programmer would be able to add it to an existing language.
      In this post, I suggest a modest incremential change to the Perl syntax.
      Modest, but one that, regardless of its merits, is unlikely to happen,
      given the way that Perl 5 is currently parsed.
      And I show a way of writing a parser, so that this change,
      or others, can be made in a straightforward way,
      and without designing your language into a corner.
    </p>
    <p>
      When initializing a hash, Perl 5 allows you to use not just commas,
      but also the so-called "wide comma" (<tt>=&gt;</tt>).
      The wide comma is suggestive visually, and it also has some smarts
      about what a hash key is:
      The hash key is always converted into a string, so that wide comma
      knows that in a key-value pair like this:
    </p><blockquote>
      <pre>
    key1 => 711,
</pre>
    </blockquote><p>
      that
      <tt>key1</tt>
      is intended as a string.
    </p>
    <p>
      But what about something like this?
    </p>
    <blockquote>
      <pre>
  {
   company name => 'Kamamaya Technology',
   employee 1 => first name => 'Jane',
   employee 1 => last name => 'Doe',
   employee 1 => title => 'President',
   employee 2 => first name => 'John',
   employee 2 => last name => 'Smith',
   employee 3 => first name => 'Clarence',
   employee 3 => last name => 'Darrow',
  }
</pre>
    </blockquote><p>
      Here I think the intent is obvious -- to create an employee database in the form
      of a hash of hashes, allowing spaces in the keys.
      In Data::Dumper format, the result would look like:
    </p><blockquote>
      <pre>
{
              'employee 2' => {
                                'last name' => '\'Smith\'',
                                'first name' => '\'John\''
                              },
              'company name' => '\'Kamamaya Technology\'',
              'employee 3' => {
                                'last name' => '\'Darrow\'',
                                'first name' => '\'Clarence\''
                              },
              'employee 1' => {
                                'title' => '\'President\'',
                                'last name' => '\'Doe\'',
                                'first name' => '\'Jane\''
                              }
            }
</pre>
    </blockquote>
    <p>And in fact, that is the output of the script in
      <a href="https://gist.github.com/jeffreykegler/9478391">
    this Github gist</a>,
        which parses the previous "extended Perl 5" snippet using a Marpa
        grammar before passing it on to Perl.
      </p>
      <p>Perl 5 does not allow a syntax like this,
      and looking at its parsing code will tell you why -- it's already
      a maintenance nightmare.
      The extension I've described above could, in theory, be added to Perl
      5, but doing so would aggravate an already desperate maintenance situation.
    <p>
      Now, depending on your tastes,
      you feel just as happy that you'll never
      see the change I've just described in Perl 5.
      But I don't think it is as easy to happy about a parsing technology that
      quickly paints the languages which use it into a corner.
    </p>
    <h3>To learn more</h3>
    <p>
      This example was produced with the Marpa parser.
      <a href="https://metacpan.org/module/Marpa::R2">Marpa::R2
        is available on CPAN</a>.
      The code for this example is based on that in
      the synopsis for its top-level document,
      but it is isolated conveniently in
      <a href="https://gist.github.com/jeffreykegler/9478391">
        a Github gist</a>.
    </p>
    <p>
      A list of my Marpa tutorials can be found
      <a href="http://jeffreykegler.github.io/Ocean-of-Awareness-blog/metapages/annotated.html#TUTORIAL">
        here</a>.
      There are
      new tutorials by
      <a href="http://marpa-guide.github.io/chapter1.html">Peter Stuifzand</a>
      and
      <a href="http://longanswers.blogspot.de/2013/06/transforming-syntax.html">amon</a>.
      <a href="http://jeffreykegler.github.com/Ocean-of-Awareness-blog/">
        The Ocean of Awareness blog</a>
      focuses on Marpa,
      and it has
      <a href="http://jeffreykegler.github.io/Ocean-of-Awareness-blog/metapages/annotated.html">an annotated guide</a>.
      Marpa has
      <a href="http://jeffreykegler.github.com/Marpa-web-site/">a web page that I maintain</a>
      and Ron Savage maintains
      <a href="http://savage.net.au/Perl-modules/html/marpa.papers/index.html">
        another</a>.
      For questions, support and discussion, there is
      <a href="http://groups.google.com/group/marpa-parser">
        the "marpa parser"
        Google Group.</a>
    </p>
    <h3>Comments</h3>
    <p>
      Comments on this post can be made in Marpa's Google group:
      <a href="http://groups.google.com/group/marpa-parser">.
      </a></p>
  </body>
</html>
